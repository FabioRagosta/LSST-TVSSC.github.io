<!DOCTYPE HTML>
<!--
	Prologue by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    
	<head>
		<title>LSST-TVS</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body>    



		<!-- Header -->
			<div id="header">

				<div class="top">

					<!-- Logo -->
						<div id="logo">
							<span class="image avatar48"><img src="images/lsst_tvs_logo_tiny_0.jpeg"subg alt="" /></span>
							<h1 id="title"> Transients and Variable Stars </h1>
							<p>LSST Science Collaboration</p>
						</div>

					<!-- Nav -->
						<nav id="nav">
							<!--

								Prologue's nav expects links in one of two formats:

								1. Hash link (scrolls to a different section within the page)

								   <li><a href="#foobar" id="foobar-link" class="icon fa-whatever-icon-you-want skel-layers-ignoreHref"><span class="label">Foobar</span></a></li>

								2. Standard link (sends the user to another page/site)

								   <li><a href="http://foobar.tld" id="foobar-link" class="icon fa-whatever-icon-you-want"><span class="label">Foobar</span></a></li>

							-->
							<ul>
								<li><a href="#top" id="top-link" class="skel-layers-ignoreHref"><span class="icon fa-home">Intro</span></a></li>
                                <li><a href="#subgroups" id="portfolio-link" class="skel-layers-ignoreHref"><span class="icon fa-th">Subgroups</span></a></li>
                                <li><a href="#members" id="about-link" class="skel-layers-ignoreHref"><span class="icon fa-user">Members and roles</span></a></li>
                                
								<li><a href="#task forces" id="portfolio-link" class="skel-layers-ignoreHref"><span class="icon fa-th">Task Forces</span></a></li>
								
								<li><a href="https://tvs.science.lsst.org/apply" id="contact-link" class="skel-layers-ignoreHref"><span class="icon fa-edit">Become a member</span></a></li>
                                
                                <li><a href="#contact" id="contact-link" class="skel-layers-ignoreHref"><span class="icon fa-envelope">Contact us</span></a></li>
							</ul>
						</nav>

				</div>

				<div class="bottom">

					<!-- Social Icons -->
						<ul class="icons">
							<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="https://github.com/LSST-TVSSC" class="icon fa-github"><span class="label">Github</span></a></li>
							<li><a href="#contact" class="icon fa-envelope"><span class="label">Email</span></a></li>
						</ul>

				</div>

			</div>

		<!-- Main -->
			<div id="main">

				<!-- Intro -->
					<section id="top" class="one dark cover">
						<div class="container">

							<header>
								<h2 class="alt">Coming soon... .</h2>
								<p>In the meantime you can find out about us on the <a href="https://tvs.science.lsst.org/">LSST TVS wiki</a>
							</header>

							

						</div>
					</section>

				<!-- Portfolio -->
				<!--
                    <section id="portfolio" class="two">
						<div class="container">

							<header>
								<h2>Portfolio</h2>
							</header>

							<p>Vitae natoque dictum etiam semper magnis enim feugiat convallis convallis
							egestas rhoncus ridiculus in quis risus amet curabitur tempor orci penatibus.
							Tellus erat mauris ipsum fermentum etiam vivamus eget. Nunc nibh morbi quis
							fusce hendrerit lacus ridiculus.</p>

							<div class="row">
								<div class="4u 12u$(mobile)">
									<article class="item">
										<a href="#" class="image fit"><img src="images/pic02.jpg" alt="" /></a>
										<header>
											<h3>Ipsum Feugiat</h3>
										</header>
									</article>
									<article class="item">
										<a href="#" class="image fit"><img src="images/pic03.jpg" alt="" /></a>
										<header>
											<h3>Rhoncus Semper</h3>
										</header>
									</article>
								</div>
								<div class="4u 12u$(mobile)">
									<article class="item">
										<a href="#" class="image fit"><img src="images/pic04.jpg" alt="" /></a>
										<header>
											<h3>Magna Nullam</h3>
										</header>
									</article>
									<article class="item">
										<a href="#" class="image fit"><img src="images/pic05.jpg" alt="" /></a>
										<header>
											<h3>Natoque Vitae</h3>
										</header>
									</article>
								</div>
								<div class="4u$ 12u$(mobile)">
									<article class="item">
										<a href="#" class="image fit"><img src="images/pic06.jpg" alt="" /></a>
										<header>
											<h3>Dolor Penatibus</h3>
										</header>
									</article>
									<article class="item">
										<a href="#" class="image fit"><img src="images/pic07.jpg" alt="" /></a>
										<header>
											<h3>Orci Convallis</h3>
										</header>
									</article>
								</div>
							</div>

						</div>
					</section>

				<!-- About Me -->
					<section id="about" class="three">
						<div class="container">

							<!--<header>
								<h2>About Us</h2>
							</header>

							-->

							<p>Transients and Variable Stars Science Collaboration Website 
                                The LSST Transients and Variable Stars collaboration focuses on the transient sky, including a large and diverse range of phenomena: variable events, periodic or not, explosive and eruptive transients, and geometric transients (e.g. eclipsing binaries and planets). Variability is a tell tale of the nature of the object observed, but it also enables galactic studies (the mapping of the galactic structure), extragalactic studies (the characterization of the intracluster medium), and cosmological studies. Because of their physical and phenomenological diversity, the object we study span a wide range of timescales, and present themselves in a range of brightnesses, and colors. LSST also holds great potential for discovery of new transient phenomena, especially at the very short and very long time scales.</p>

						</div>
					</section>
                
                <!--Subgroups -->
                <section id="subgroups" class="three">
						<div class="container">

							<header>
								<h2>Subgroups</h2>
							</header>
                            <p>Our collaboration is organized in 
                                <a href="https://tvs.science.lsst.org/subgroups">15 groups </a> with common expertise and interests, that are delineating a roadmap to maximize the potential of the LSST survey in the discovery and characterization of the transient sky. 
                            
     
                            </p>
                            
        <table border="0" style="width:100%">
        <tr><td>
                           

             
                This is chord diagram showing the structure of the <a href="https://tvs.science.lsst.org/">LSST Transients and Variable Stars Collaboration - TVS</a> and the affiliation to LSST TVS subgroups. Each pair linked by a chord represents two subgroup affiliations that are shared by a number of members proportional to the width of the chord.
            
                Roll over each wedge to see more information about each subgroup pair and on the arc to know more about the subgroup.
            The code is on <a href="https://github.com/fedhere/TVSaffiliations">github</a>, 
            text is parsed in gathered and python and  the graphics is created in <a href="http://d3js.org/">d3</a>, leveraging  heavily off this demo <a href="http://www.delimited.io/blog/2013/12/8/chord-diagrams-in-d3">blogpost</a> by <a href="http://www.delimited.io/about/">Steve Hall</a>
             
    </td>
  </tr>
</table>
    <div id="charts"></div>
    <div id="tooltip" vlink="#808080" alink="#FF0000"></div>
    <script type=
    "text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
    <script src="lib/underscore.js"></script>
    <script src="scripts/js/mapper.js"></script>

    <script>
    var matrixOut = 'data/affiliations-matrix.json';
    var mapOut = 'data/affiliations-map.json';

          //*******************************************************************
          //  CREATE MATRIX AND MAP
          //*******************************************************************


    d3.csv('data/affiliations.csv', function (error, data) {
            var mpr = chordMpr(data);
            _.each(data, function (d) {
              mpr.addToMap(d.word1, d.field, d.fielddef)
            });
            mpr.setFilter(function (row, a, b) {
                return (row.word1 === a.name && row.word2 === b.name)
              })
              .setAccessor(function (recs, a, b) {
                if (!recs[0]) return 0;
                return {count: recs[0].count, field: recs[0].field, valueOf: value, fielddef:recs[0].fielddef};
              });
            drawChords(mpr.getMatrix(), mpr.getMap());
          function value() { return +this.count; }
          });

         //console.log(matrix, mmap);

              //*******************************************************************
          //  DRAW THE CHORD DIAGRAM
          //*******************************************************************
          function testChords (matrix, mmap) {
          console.log(matrix,mmap)
          };
          //*******************************************************************
          //  DRAW THE CHORD DIAGRAM
          //*******************************************************************
         function drawChords (matrix, mmap) {


    function readstats () {
    d3.csv("data/affiliationsNumbers.csv", function(error, data){

          data.map(function(d)
            {
                console.log("subg:", d.subg)
                //each d is one line of the csv file represented as a json object
                subg = d.subg;
                //we slice the dollar sign off then convert to a number with the + sign
                //slicing works like "$216".slice(1) gives you 216, 
                //you can also give it a range like "$216 asdf".slice(1,4) gives you 216
                p = parseInt(d.tot)
                //console.log("tot:", p,d.tot);
                return {d} ;
    });
    console.log("tostats", data);
    return data
    });
         }
    tostats = readstats()
    var subgroups = {}
    subgroups['Classification/Characterization']="https://tvs.science.lsst.org/node/10"
    subgroups['DistanceScale']="https://www.lsstcorp.org/sciencewiki/index.php?title=Distance_Scale"
    subgroups['FastTransients']="https://tvs.science.lsst.org/node/14"
    subgroups['Galactic'] = "https://tvs.science.lsst.org/node/19"
    subgroups['InteractingBinaries']="https://tvs.science.lsst.org/node/20"
    subgroups['MagneticallyActiveStars']="https://www.lsstcorp.org/sciencewiki/index.php?title=Magnetically_Active_Stars"
    subgroups['MicrolensingSubgroup']="https://www.lsstcorp.org/sciencewiki/index.php?title=Microlensing_Subgroup"
    subgroups['MultiwavelengthCharacterization/Counterparts']="https://tvs.science.lsst.org/node/11"
    subgroups['Non-degenerateEruptiveVariables']="https://tvs.science.lsst.org/node/6"
    subgroups['PulsatingVariables']="https://www.lsstcorp.org/sciencewiki/index.php?title=Pulsating_Variables"
    subgroups['Supernovae']="https://tvs.science.lsst.org/node/7"
    subgroups['TidalDisruptionEvents']="https://tvs.science.lsst.org/node/13#overlay-context=subgroups"
    subgroups['TransitingPlanets']="https://tvs.science.lsst.org/node/18"




    save_twentycols=["#000000", "#070D12", "#0E1A24", "#152736", "#1C3448", "#23415A", "#2A4E6C", "#315B7E", "#386890", "#3F75A2","#4682B4","#588EBC","#6B9BC3","#7EA8CA","#90B4D2","#A2C0DA","#B5CDE1","#C8DAE8","#DAE6F0","#ECF2F8","#FFFFFF"]
    twentycols=[ "#070D12", "#152736", "#23415A", "#315B7E", "#3F75A2","#588EBC","#7EA8CA","#A2C0DA","#C8DAE8","#ECF2F8","#FFFFFF"]
    twentycols = ['#9C6744','#C9BEB9', "#C8DAE8",'#CFA07E','#C4BAA1','#C2B6BF','#85889E',"#4682B4",'#9C7989','#91919C','#242B27','#212429','#99677B','#36352B','#33332F','#2B2B2E','#2E1F13','#2B242A','#918A59','#6E676C','#6E4752','#6B4A2F','#998476','#8A968D','#968D8A','#968D96','#CC855C', '#967860','#929488','#949278','#A0A3BD','#BD93A1','#65666B','#6B5745','#6B6664','#695C52','#56695E','#69545C','#565A69','#696043','#63635C','#636150','#333131','#332820','#302D30','#302D1F','#2D302F','#CFB6A3','#362F2A'];

            var margin = {top: 50, right: 40, bottom: 50, left: 20};
            var w = 900, h = 700, r1 = h / 2, r0 = r1 - 100;

            var fill = d3.scale.ordinal()
                .domain(d3.range(12))
                .range(twentycols)


            var chord = d3.layout.chord()
                .padding(.02)
                .sortSubgroups(d3.descending)
                .sortChords(d3.descending);

            var arc = d3.svg.arc()
                .innerRadius(r0)
                .outerRadius(r0 + 20);

            var svg = d3.select("#charts").append("svg:svg")
                .attr("width", w)
                .attr("height", h)
              .append("svg:g")
                .attr("id", "circle")
                .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")");
                svg.append("circle")
                    .attr("r", r0 + 20);

           var rdr = chordRdr(matrix, mmap);
            chord.matrix(matrix);
            console.log("chord",chord.chords());

            function mouseovergroup(d, i) {
                console.log("object", groupTip(rdr(d)));
              d3.select("#tooltip")
    .style("visibility", "visible")
    .html("<a href='"+groupTip(rdr(d))+"' style='color: #ffffff'>link to subgroup page</a><br/>")
                  .style("top", function () { return (d3.event.pageY + 5)+"px"})
                  .style("left", function () { return (d3.event.pageX + 5)+"px";})

                chordPaths.classed("fade", function(p) {
                  return p.source.index != i
                      && p.target.index != i;
                });
    }

            console.log(tostats);
            var g = svg.selectAll("g.group")
                .data(chord.groups())
              .enter().append("svg:g")
              .attr("class", "group")
              .on("mouseover", mouseovergroup);
                //.on("mouseout", function (d) { d3.select("#tooltip").style("visibility", "hidden") });

              g.append("svg:path")
                .style("stroke", "black")
                .style("fill", function(d) {  return twentycols[d.index]})
                .attr("d", arc);

              g.append("svg:text")
                .each(function(d) { d.angle = (d.startAngle + d.endAngle) / 2; })
                .attr("dy", ".35em")
                .style("font-family", "helvetica, arial, sans-serif")
                .style("font-size", "15px")
                .attr("text-anchor", function(d) { return d.angle > Math.PI ? "end" : null; })
                .attr("transform", function(d) {
                  return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")"
                      + "translate(" + (r0 + 26) + ")"
                      + (d.angle > Math.PI ? "rotate(180)" : "");
                })
                .text(function(d) { return rdr(d).gname; });

            var chordPaths = svg.selectAll("path.chord")
                    .data(chord.chords())
                  .enter().append("svg:path")
                    .attr("class", "chord")
                    .style("stroke", function(d) { return d3.rgb(fill(+rdr(d).sdata.field)).darker();})
                    .style("fill", function(d) { console.log(d);return  (twentycols[d.source.index]); })
                    .attr("d", d3.svg.chord().radius(r0))
                    .on("mouseover", function (d) {
                      d3.select("#tooltip")
                        .style("visibility", "visible")
                        .html(chordTip(rdr(d)))
                        .style("top", function () { return (d3.event.pageY - 100)+"px"})
                        .style("left", function () { return (d3.event.pageX - 100)+"px";})
                     })
                    .on("mouseout", function (d) { d3.select("#tooltip").style("visibility", "hidden") });

            function chordTip (d) {
                var p = d3.format(".2%"), q = d3.format(",r")
                return "Chord Info:<br/>"
                  + p(d.svalue/d.stotal) + " (" + q(d.svalue) + ") of the people in the "
                  + d.sname + " subgroup <br/>are also in  " + d.tname
              }
            function getByValue(arr, value) {

               for (var i=0, iLen=arr.length; i<iLen; i++) {

                 if (arr[i].b == value) return arr[i];
               }
            }
            function groupTip (d) {
               console.log(subgroups)
               var p = d3.format(".1%"), q = d3.format(".1r"), z = d3.format(".1r")
               return subgroups[d.gname]
               //"The affiliaton to '" + d.gname
               //     + "' <br/> is chosen as either primary or secondary  by "
               //     + q(d.gvalue) + " members. <br/>"
               //     + p(d.gvalue/d.mtotal)
               //     + " of all affiliations (" + q(d.mtotal) + ")<br/>" 
              }

           //function mouseover(d, i) {
            //    console.log("<a href='"+groupTip(rdr(d))+"'>link to subgroup page</a>")
            //    d3.select("#tooltip")
            //      .style("visibility", "visible")
            //      .html("<a href='"+groupTip(rdr(d))+"'>link to subgroup page</a>")
            //      .style("top", function () { return (d3.event.pageY + 80)+"px"})
            //      .style("left", function () { return (d3.event.pageX - 130)+"px";})
            //                                          
            //    chordPaths.classed("fade", function(p) {
            //      return p.source.index != i
            //          && p.target.index != i;
            //    });
            //  }

          }

        </script>
                                      

                                
						</div>
					</section>
                
                <!--Members -->
                <section id="members" class="three">
						<div class="container">

							<header>
								<h2>Members</h2>
							</header>
                               Coming soon
						</div>
					</section>       
        
       <!--task forces -->
                <section id="taskForces" class="three">
						<div class="container">

							<header>
								<h2>Task Forces</h2>
							</header>
                               Coming soon
						</div>
					</section>       
        
				<!-- Contact -->
					<section id="contact" class="three">
						<div class="container">

							<header>
								<h2>Contact</h2>
							</header>

							<p>Contact us for more information <br>a message will be sent to the co-chairs Rachel Street and Federica Bianco</p>

							<form method="post" action="https://formspree.io/fedhere@gmail.com">

                                <div class="row">
									<div class="6u 12u$(mobile)"><input type="text" name="name" placeholder="Name" /></div>
									<div class="6u$ 12u$(mobile)"><input type="email" name="email" placeholder="Email" /></div>
									<div class="12u$">
										<textarea name="message" placeholder="Message"></textarea>
									</div>
									<div class="12u$">
										<input type="submit" value="Send Message" />
									</div>
								</div>
							</form>

						</div>
					</section>

			</div>

		<!-- Footer -->
			<div id="footer">

				<!-- Copyright -->
					<ul class="copyright">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollzer.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
